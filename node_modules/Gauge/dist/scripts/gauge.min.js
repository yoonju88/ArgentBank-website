$.fn.gauge=function(){"use strict";var t=1060,e=500,a=50,i=1e3,c=75,n=.7,r=2.3,s=2,o=3,h="#1e98e4",g=7,l="#666",d="18",u="#444",v="12",w="Arial",f=function(a){var i=a.css("width").replace("px","")||t,c=a.css("height").replace("px","")||e;a.append('<canvas id="myCanvas" width="'+i+'" height="'+c+'"></canvas>'),a.append('<div class="arrow"><div class="arrow-circle"></div></div>'),a.append('<div class="tick"></div>')},p=function(f){var p=function(a){var i=f.css("width").replace("px","")||t,c=f.css("height").replace("px","")||e;window.devicePixelRatio>1&&(a.width=i,a.height=c,a.style.width=i/2+"px",a.style.height=c/2+"px")},P=function(t){return f.attr("gauge-"+t)},k=function(){var t=document.getElementById("myCanvas"),e=t.getContext("2d"),a=t.width/2,i=t.height/2,o=P("radius")||c,h=(+P("startAngle")||n)*Math.PI,g=(+P("endAngle")||r)*Math.PI,l=!1,d=[$(".gauge .sector:nth-child(1)").css("background-color"),$(".gauge .sector:nth-child(2)").css("background-color"),$(".gauge .sector:nth-child(3)").css("background-color")],u=[$(".gauge .sector:nth-child(1)").attr("sector-width"),$(".gauge .sector:nth-child(2)").attr("sector-width"),$(".gauge .sector:nth-child(3)").attr("sector-width")];p(t),e.lineWidth=P("lineWidth")||s,e.beginPath(),e.arc(a,i,o,h,u[0]*Math.PI,l),e.strokeStyle=d[0],e.stroke(),e.beginPath(),e.arc(a,i,o,u[0]*Math.PI,u[1]*Math.PI,l),e.strokeStyle=d[1],e.stroke(),e.beginPath(),e.arc(a,i,o,u[1]*Math.PI,g,l),e.strokeStyle=d[2],e.stroke()},m=function(){var t=document.getElementById("myCanvas"),e=t.getContext("2d"),s=$(".gauge .arrow").css("width").replace("px","")||o,l=$(".gauge .arrow").css("background-color")||h,d=P("radius")||c,u=$(".gauge .arrow-circle").css("width").replace("px","")||g,v=$(".gauge .arrow .arrow-circle").css("background-color")||h,w=0,f=+P("startAngle")||n,p=+P("endAngle")||r,k=+P("value")||a,m=+P("max")||i,y=0,x=0;x=m/k,y=p/m+f,w=2/x,e.fillStyle=l,e.save(),e.beginPath(),e.translate(t.width/2,t.height/2);var M=.16*+P("step");w=10/m*M*k/P("step")+.2,e.rotate(w*Math.PI),e.moveTo(0-s,0),e.lineTo(0,d),e.lineTo(0+s,0),e.lineTo(0-s,0),e.fill(),e.closePath(),e.restore(),e.beginPath(),e.arc(t.width/2,t.height/2,u,0,2*Math.PI,!1),e.fillStyle=v,e.fill()},y=function(t){return t*(Math.PI/180)},x=function(){var t=document.getElementById("myCanvas"),e=t.getContext("2d"),a=P("tick-inner"),i=$(".gauge .tick").css("height").replace("px","")||d,c=$(".gauge .tick").css("color")||l,n=+P("radius"),r=+P("step"),s=+P("max"),o=0,h=0,g=0,f=0,p=0,k=0,m=0,x=0,M=0,I=0,b=0,T=0,C=0,S=$(".gauge").css("color")||u,A=$(".gauge").css("font-size")||v,B=$(".gauge").css("font-family")||w;o=a?n-i:n+i;for(var E=-54;235>E;E+=287*r/s)h=y(E),g=n-Math.cos(h)*o,f=n-Math.sin(h)*o,p=n-Math.cos(h)*n,k=n-Math.sin(h)*n,m=t.width/2-n+g,x=t.height/2-n+f,M=t.width/2-n+p,I=t.height/2-n+k,e.beginPath(),e.strokeStyle=c,e.moveTo(m,x),e.lineTo(M,I),e.stroke(),e.closePath(),e.font=A+" "+B,e.fillStyle=S,T=t.width/2-(n+10)+(n-Math.cos(h)*(n+20)),C=t.height/2-(n-10)+(n-Math.sin(h)*(n+20)),e.fillText(b,T,C),b+=r};k(),m(),x()};$(window).load(function(){var t,e=function(){t=setTimeout(function(){$(".gauge").each(function(){p($(this))}),clearTimeout(t),e()},100)};$(".gauge").each(function(){f($(this)),p($(this)),e()})})}();